(function(t){"use strict";var i,s,e,n=["consume","guide"],o=t(window);for(i=0;n.length>i;++i)s=n[i],(void 0!==t[s]||void 0!==t.fn[s])&&console.log("guide.js: existing $."+s+" implementation!");e=function(i){var s=o.scrollTop(),e=s+o.height(),n=t(i).offset().top,r=n+t(i).height();return n>s&&e>r},t.extend(t.expr[":"],{in_viewport:e}),t.consume=function(t){return t?(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.cancelBubble=!0,t.returnValue=!1,!1):!1},t.fn.guide=function(i){var s=window.guide;if(!s)throw"guide.js: bad $.fn.guide call, global guide has not been setup,have you forgotten to initialize guide.js?";return s.addSpot(t(this),i||{}),t(this)}})($),function(_,t){"use strict";(function(){var i,s,e=["dotAssign","parseOptions"];for(s=0;e.length>s;++s)if(i=e[s],t!==_[i])throw"guide.js: existing _."+i+" implementation!"})(),_.dotAssign=function(t,i,s){var e,n,o=(""+t).split("."),r=o.length,h=s||{};if(r>1)for(t=h,n=0;r>n;++n){if(e=o[n],t[e]=t[e]||{},n===r-1){t[e]=i;break}t=t[e]}else h[t]=i;return h},_.dotGet=function(i,s,e){var n,o,r=(""+i).split(e||"."),h=r.length,a=s||{};if(1>=h)return a[i];for(o=0;h>o;++o)if(n=r[o],a=a[n],t===a)return t;return a};var i=/[:|,]/,s=RegExp(":\\s+","g"),e=function(t){return"false"===t?!1:"true"===t?!0:""+Number(t)===t?Number(t):t};_.parseOptions=function(t,n){var o,r,h,a=(n||{}).separator||i,u=(n||{}).sanitizer||s,l=(n||{}).converter||e,d=(t||"").replace(u,":").split(a),c=d.length,p={};for(o=0;c>o;++o)r=(d[o]||"").trim(),h=(d[++o]||"").trim(),r&&_.dotAssign(r,l(h),p);return p}}(_),function(t,_,i){"use strict";if(!i)throw Error("guide.js: jQuery is undefined, are you sure it has been loaded yet?");var s,e,n=function(){return this.constructor.apply(this,arguments),this},o="with-gjs",r="gjs-with-overlay",h="gjs-without-overlay",a="gjs-hiding",u="gjs-entity";_.extend(n.prototype,{id:"guide",defaults:{withOverlay:!1,withAnimations:!0,animeDuration:500,RTL:!1,debug:!0},constructor:function(){_.extend(this,{$container:i("body"),$el:i('<div id="gjs" />'),extensions:[],$:i(this),tours:[],tour:null,platforms:[]}),console.log("guide.js: running")},defineTour:function(t,i){var s;return(s=this.getTour(t))||(s=new n.Tour(t),this.tours.push(s)),i&&this.addSpots(i),s},getTour:function(t){return _.isString(t)?_.find(this.tours||[],{id:t}):_.find(this.tours||[],t)},allTours:function(){return _.reject(this.tours,function(t){return!t.spots.length})},defaultTour:function(){var t;return(t=_.find(this.tours,function(t){return t.isOn("isDefault")}))?t:(t=_.find(this.tours,function(t){return t.spots.length>0}),t?t:this.tour||this.tours[0])},inactiveTours:function(){return _.without(this.tours,this.tour)},runTour:function(t,i){var s,e=this.tour;if(!(s=this.getTour(t)))throw'guide.js: undefined tour "'+t+'", did you call #defineTour()?';return this.isShown()?e&&e.isActive()?(this.tour=null,e.$.one("stop",_.bind(this.runTour,this,s.id,i)),e.stop(),!1):(console.log('guide.js: touring "'+s.id+'"'),this.tour=s,this.tour.start(i),!0):(this.$.one("show",_.bind(this.runTour,this,s.id,i)),this.show({noAutorun:!0}),!1)},addSpot:function(t,i){var s=this.tour,e=i||{},o=e.tour;if(o)if(_.isString(o))s=this.defineTour(o);else{if(!(o instanceof n.Tour))throw Error("guide.js: bad tour object, unrecognized type: "+typeof o);s=o}return s.addSpot(t,e)},addSpots:function(t){if(t instanceof jQuery)return this.fromDOM(t);if(_.isArray(t))return this.fromJSON(t);throw Error("guide.js: bad spots, expected Array or jQuery selector, got: "+typeof t)},fromJSON:function(t){return t=_.isArray(t)?t:[t],_.each(t,function(t){this.addSpot(t.$el,t)},this),this},fromDOM:function(t){var s=this,e=i(t||"body");return e.find("[data-guide-tour]").add(e).each(function(){var t,e=i(this).attr("data-guide-tour"),n=i(this).attr("data-guide-options");e&&(t=s.defineTour(e),n&&t.setOptions(n))}),e.find("[data-guide], [data-guide-spot]").each(function(){var t=i(this);i(this).is("[data-guide-spot]")?s.fromReferenceNode(t):s.fromNode(t,{text:t.attr("data-guide")})}),this},fromNode:function(t,i){var s,e=t,n=_.extend({caption:e.attr("data-guide-caption"),tour:i.tour||e.attr("data-guide-tour")},_.parseOptions(e.attr("data-guide-options")),i);return n.tour||(s=e.parents("[data-guide-tour]:first"),s.length&&(n.tour=s.attr("data-guide-tour"))),e.attr({"data-guide":null,"data-guide-options":null,"data-guide-caption":null}),this.addSpot(e,n)},fromReferenceNode:function(t){var s=t.parents("[data-guide-tour]:first"),e=i(t.detach().attr("data-guide-spot")),n=_.parseOptions(t.attr("data-guide-options"));this.fromNode(e,_.extend(n,{text:t.attr("data-guide-spot",null)[0].outerHTML,tour:s.attr("data-guide-tour")}))},show:function(t,i){var s=t||{},e=this,n=this.isOn("withAnimations")?this.getOption("animeDuration"):0;if(this.isShown())return this;if(!this.tours.length)throw"guide.js: can not show with no tours defined!";return this.$.triggerHandler("showing"),this.$container.addClass(o),this.toggleOverlayMode(),this.$el.appendTo(this.$container),this.$el.animate({opacity:"show"},n,function(){e.$.triggerHandler("show"),s.noAutorun||e.runTour(s.tour||e.defaultTour()),i&&_.isFunction(i)&&i.apply(e,[])}),this},isShown:function(){return this.$container.hasClass(o)&&!this.$container.hasClass(a)},hide:function(){var t=this,i=this.isOn("withAnimations")?this.getOption("animeDuration"):0;return this.isShown()?(this.$container.addClass(a),t.$.triggerHandler("hiding"),t.$el.animate({opacity:"hide"},i,function(){t.tour&&(t.tour.stop(),t.tour=null),t.$.triggerHandler("hide"),t.$el.detach(),t.$container.removeClass([o,r,a].join(" "))}),this):this},refresh:function(){return this.tour&&this.tour.refresh(),this.isShown()&&this.toggleOverlayMode(),this},reset:function(){this.tour&&(this.tour.stop(),this.tour=null),this.isShown()&&this.hide(),this.$.triggerHandler("reset"),_.invoke(this.extensions,"reset",!0),_.invoke(this.tours,"reset",!0),this.options={},this.setOptions(this.defaults),this.tours=[],this.tour=this.defineTour("Default Tour")},toggleOverlayMode:function(t){var i=this.isOn("withOverlay");t&&this.setOption("withOverlay",!this.isOn("withOverlay")),this.tour&&this.tour.hasOption("withOverlay")&&(i=this.tour.getOption("withOverlay")),i?this.$container.addClass(r).removeClass(h):this.$container.removeClass(r).addClass(h)},dismiss:function(){this.$.triggerHandler("dismiss")},focus:function(){return this.tour.focus.apply(this.tour,arguments)},entityKlass:function(){return u},addExtension:function(t){if(!t.id)throw Error("guide.js: bad extension, no #id attribute defined");if(this.extensions.push(t),void 0===t.__initExtension)throw Error("guide.js: bad extension, does not seem to implement the guide.Extension prototype");t.__initExtension(),console.log("guide.js: extension registered: ",t.id)},getExtension:function(t){return _.find(this.extensions,{id:t})},log:function(){this.isOn("debug")&&console.log.apply(console,arguments)}}),n=new n,n.VERSION="1.4.2",e!==undefined?(s!==undefined&&s.exports&&(e=s.exports=n),e.guide=n):t.guide=n}(this,_,jQuery),function(_,t,i){"use strict";var s=i,e={defaults:{},setOptions:function(t,i,s){var e;if(_.isString(t))t=_.parseOptions(t);else if(!_.isObject(t))throw"guide.js: bad options passed to #setOptions; expected an Object or a String, but got: "+typeof t;if(this.options||(this.options={}),t.overrides){for(e in t.overrides)this.setOptions(t.overrides[e],e,!0);delete t.overrides}return e=i||"default",this.options[e]=_.extend(this.options[e]||{},t),!s&&this.refresh&&this.refresh(),!s&&this.$&&this.$.triggerHandler("refresh",[this]),this},setOption:function(t,i,s,e){var n={};return n[t]=i,this.setOptions(n,s,e)},getOptions:function(t){var i=_.extend({},this.options["default"],this.options[s.platform]);return t?this.getOption(t,i):i},getOption:function(t,i){return _.dotGet(t,i||this.getOptions())},hasOption:function(t,i){return void 0!==this.getOption(t,i)},isOptionOn:function(t,i){var s=this.getOption(t,i);return _.isBoolean(s)&&s},isOn:function(){return this.isOptionOn.apply(this,arguments)},addOption:function(t,i){this.defaults[t]=i,this.options&&this.setOption(t,i)}};i.Optionable=e,_.extend(i,_.omit(e,"defaults")),i.setOptions(i.defaults)}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=i,e=_.extend({},i.Optionable,{__initExtension:function(){if(!this.id)throw"guide.js: bad extension, missing #id";this.defaults=_.defaults(this.defaults||{},{enabled:!0}),this.$=t(this),this.options={},this.setOptions(_.extend({},this.defaults)),i.$.on(this.nsEvent("dismiss"),_.bind(this.remove,this)),i.$.on(this.nsEvent("refresh"),_.bind(this.refresh,this)),this.onGuideShow&&i.$.on(this.nsEvent("show"),_.bind(function(){this.isEnabled()&&(this.onGuideShow(),this.onGuideHide&&i.$.one(this.nsEvent("hide"),_.bind(this.onGuideHide,this)))},this)),this.onTourStart&&i.$.on(this.nsEvent("start.tours"),_.bind(function(t,i){this.isEnabled(i)&&(this.onTourStart(i),this.onTourStop&&i.$.one(this.nsEvent("stop"),_.bind(this.onTourStop,this,i)))},this)),this.install&&this.install()},nsEvent:function(t){return[t,"gjs_extension",this.id].join(".")},getOptions:function(t){var e=this.id;return t=t||i.tour,_.extend({},this.options["default"],this.options[s.platform],s.getOptions()[e],t?t.getOptions()[e]:null)},isEnabled:function(t){var i=[this.id,"enabled"].join(".");return t&&t.hasOption(i)?t.isOptionOn(i):this.isOptionOn("enabled")},refresh:function(){},reset:function(){this.options={},this.setOptions(this.defaults)},remove:function(){}});i.Extension=e}(_,jQuery,window.guide),function(_,t,i,s){"use strict";var e=function(){return this.constructor.apply(this,arguments)};_.extend(e.prototype,i.Optionable,{defaults:{alwaysHighlight:!0,isDefault:!1,refreshInterval:10,onStart:null,onStop:null},constructor:function(s){return _.extend(this,{$:t(this),id:s,options:{"default":_.extend({},this.defaults,i.getOptions("tours"))},spots:[],current:null,previous:null,cursor:-1,active:!1}),_.isFunction(this.getOption("onStart"))&&this.$.on("start.user",_.bind(this.getOption("onStart"),this)),_.isFunction(this.getOption("onStop"))&&this.$.on("stop.user",_.bind(this.getOption("onStop"),this)),this},start:function(t){var e=this.current||this.spots[0];return t=t||{},s!==t.spot&&(e=t.spot),i.isShown()?this.isActive()?!1:(this.active=!0,_.invoke(this.spots,"highlight"),e&&this.focus(this.__getSpot(e)),this.$.triggerHandler("start",[this]),i.$.triggerHandler("start.tours",[this]),!0):(i.runTour(this,t),!1)},stop:function(){return this.isActive()?(this.current&&this.current.defocus(),_.invoke(this.spots,"dehighlight",{force:!0}),this.active=!1,this.$.triggerHandler("stop",[this]),i.$.triggerHandler("stop.tours",[this]),!0):!1},reset:function(t){return this.current&&this.current.defocus(),this.current=this.previous=null,this.cursor=-1,t&&(_.invoke(this.spots,"remove"),this.spots=[],this.setOptions(_.clone(this.defaults))),this},isActive:function(){return this.active},refresh:function(){return this.isActive()&&(this.stop(),this.start()),this},addSpot:function(s,e){var n;if(_.isString(s)&&(s=t(s)),!(s instanceof jQuery))throw"guide.js: bad Spot target, expected a jQuery object, got "+typeof s;return n=new i.Spot(s,this,this.spots.length,e),this.spots.push(n),n.$.on("remove",_.bind(this.__removeSpot,this)),this.isActive()&&n.highlight(),this.$.triggerHandler("add",[n]),i.$.triggerHandler("add",[n]),n},addSpots:function(t){if(!_.isArray(t))throw"guide.js: bad spots, expected Array, got: "+typeof t;return _.each(t,function(t){this.addSpot(t.$el,t)},this),this},next:function(){return this.hasNext()?this.focus(this.cursor+1):!1},hasNext:function(){var t=this.spots.length;return 1!==t&&t-1>this.cursor},prev:function(){return this.hasPrev()?this.focus(this.cursor-1):!1},hasPrev:function(){return 1!==this.spots.length&&this.cursor>0},first:function(){return this.focus(0)},last:function(){return this.focus(this.spots.length-1)},focus:function(t){var e=this.__getSpot(t);if(!this.isActive())return!1;if(!e)throw"guide.js: bad spot @ "+t+" to focus";return e.isFocused()?(e.refresh(),!1):(this.current&&this.current.isFocused()&&this.__defocus(e),this._prepared||(i.log("tour: preparing spot "+e+" for focusing."),this._prepared=!0,e.$.triggerHandler("pre-focus",[e]),this.$.triggerHandler("pre-focus",[e]),i.$.triggerHandler("pre-focus",[e,this]),!e.isOn("dynamic")||e.isVisible())?(this._prepared=!1,this.current=e,this.cursor=e.index,e.focus(this.previous),this.$.triggerHandler("focus",[e,this.previous]),i.$.triggerHandler("focus",[e,this.previous]),console.log("guide.js: visiting tour spot #",e.index+1),!0):(i.log("tour: spot#"+(e.index+1),"isnt visible, attempting to refresh..."),setTimeout(_.bind(function(){return e.$el?e.__refreshTarget()&&e.isVisible()?(i.log("tour: 	spot is now visible, focusing."),this.focus(e)):(e.isOn("bouncable")&&(i.log("tour: 	spot still isnt visible, looking for an alternative..."),e=this.__closest(e,e.getOption("bounce")),e?(i.log("tour: 		alternative found: "+e+", focusing."),this._prepared=!1,this.focus(e)):i.log("tour: 		no alternative found, focusing aborted.")),s):s},this),this.getOption("refreshInterval")),!1))},__defocus:function(t){this.current.defocus(t),this.$.triggerHandler("defocus",[this.current,t]),i.$.triggerHandler("defocus",[this.current,t]),this.previous=this.current,this.current=null},__closest:function(t,i){var s,e=t.index,n=_.bind(function(t){var i,s;if("backward"===t){for(i=e-1;i>=0;--i)if(s=this.spots[i],s.isVisible())return s}else for(i=e+1;this.spots.length>i;++i)if(s=this.spots[i],s.isVisible())return s;return null},this);return 1>=this.spots.length?null:_.isNumber(i)?this.__getSpot(i):_.contains(["forward","backward"],i)?n(i):this.spots.length>e&&(s=n("forward"))?s:e>0&&(s=n("backward"))?s:null},__getSpot:function(t){return _.isNumber(t)?this.spots[t]:t?t instanceof i.Spot?_.find(this.spots||[],t):null:null},__removeSpot:function(t,i){this.spots=_.without(this.spots,i),i===this.current?(this.current=null,this.cursor=-1):i===this.previous&&(this.previous=null)}}),i.Tour=e,i.tour=i.defineTour("Default Tour")}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor.apply(this,arguments)},e="gjs-spot",n=i.entityKlass(),o="gjs-spot-focused";_.extend(s.prototype,i.Optionable,{defaults:{highlight:!0,autoScroll:!0,noPositioningFix:!1,dynamic:!0,bouncable:!0,bounce:"both",disco:!1,flashy:!1,preFocus:null,onFocus:null,onDefocus:null},templates:{disco:_.template('<div class="gjs-spot-disco"></div>'),flashy:_.template('<div class="gjs-spot-flashy"></div>')},constructor:function(i,s,e,n){if(n=n||{},!i)throw"guide.js: expected `$el` to be specified for a new Spot, got none";if(!s)throw"guide.js: expected `tour` to be specified for a new Spot, got none";return _.extend(this,{$:t(this),$el:i,tour:s,index:_.isNumber(e)?e:-1,text:n.text,caption:n.caption,$scrollAnchor:i}),this.setOptions(_.extend({},this.defaults,s.getOptions("spots"),n)),_.isFunction(n.preFocus)&&this.$.on("pre-focus.user",_.bind(n.preFocus,this)),_.isFunction(n.onFocus)&&this.$.on("focus.user",_.bind(n.onFocus,this)),_.isFunction(n.onDefocus)&&this.$.on("defocus.user",_.bind(n.onDefocus,this)),this},isFocused:function(){return this.$el.hasClass(o)},isHighlighted:function(){return this.$el.hasClass(e)},getText:function(){return this.text},hasText:function(){return!!(this.getText()||"").length},getCaption:function(){return this.caption},hasCaption:function(){return!!(this.getCaption()||"").length},hasContent:function(){return this.hasText()||this.hasCaption()},isVisible:function(){return this.$el.length&&this.$el.is(":visible")},highlight:function(){var t,s=[e,n];return this.isVisible()||(this.__refreshTarget(),this.isVisible())?this.isOn("highlight")?this.tour.isOn("alwaysHighlight")||this.__isCurrent()?(this.isOn("noPositioningFix")||this.tour.isOn("spots.noPositioningFix")||i.isOn("spots.noPositioningFix")||(t=this.$el.css("position"),_.contains(["fixed","absolute","relative"],t)||s.push("gjs-positioning-fix")),this.$el.addClass(s.join(" ")),!0):!1:!1:!1},dehighlight:function(t){return t=_.defaults(t||{},{force:!1}),!t.force&&this.tour.isOn("alwaysHighlight")&&this.tour.isOn("alwaysMark")?!1:(this.$el.removeClass([e,n,"gjs-positioning-fix"].join(" ")),!0)},focus:function(i){return this.highlight(),this.isOn("disco")&&(this.$disco||(this.$disco=t(this.templates.disco({}))),this.$disco.appendTo(this.$el)),this.isOn("flashy")&&(this.$flashy||(this.$flashy=t(this.templates.flashy({}))),this.$flashy.appendTo(this.$el),this.$flashy.toggleClass("flash-once","once"===this.getOption("flashy"))),this.$el.addClass(o).triggerHandler("focus.gjs",[this,i]),this.$.triggerHandler("focus",[this,i]),this.isOn("autoScroll")&&_.defer(_.bind(this.scrollIntoView,this)),this},defocus:function(t){return this.dehighlight(),this.$disco&&this.$disco.detach(),this.$flashy&&this.$flashy.detach(),this.$el.removeClass(o),this.$.triggerHandler("defocus",[this,t]),this.$el.triggerHandler("defocus.gjs",[this,t]),this},scrollIntoView:function(){return this.$scrollAnchor&&this.$scrollAnchor.length&&!this.$scrollAnchor.is(":in_viewport")?(t("html, body").animate({scrollTop:.9*this.$scrollAnchor.offset().top},i.isOn("withAnimations")?250:0),!0):!1},remove:function(){return i.log("Spot "+this+" is being removed."),this.$.triggerHandler("remove",[this]),this.isFocused()&&this.defocus(),this.dehighlight({force:!0}),this.$.off(),this.$el=this.$scrollAnchor=this.$=this.tour=null,this.index=-1,this},refresh:function(){return this.isVisible()||this.__refreshTarget(),this.isFocused()?(this.defocus(),this.focus(),this):(this.isHighlighted()&&(this.dehighlight(),this.highlight()),this)},setScrollAnchor:function(t){this.$scrollAnchor=t},__refreshTarget:function(){return this.$el.selector.length&&(this.$el=t(this.$el.selector),this.$scrollAnchor&&this.$scrollAnchor.length&&this.$scrollAnchor.is(":visible")||this.setScrollAnchor(this.$el)),this.isVisible()},__isCurrent:function(){return this.tour.current===this},toString:function(){return this.tour.id+"#"+(this.index+1)}}),i.Spot=s}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor()};_.extend(s.prototype,i.Extension,{defaults:{enabled:!0,inMarkers:!1,inTutor:!1,withTourSelector:!0,withJumps:!0,withClose:!0},id:"controls",templates:{controls:_.template(['<div id="gjs_controls">','<button data-action="tour.first">First</button>','<button data-action="tour.prev">&lt;</button>','<button data-action="tour.next">&gt;</button>','<button data-action="tour.last">Last</button>','<button data-action="guide.hide">Close</button>','<select name="tour" data-action="switchTour"></select>',"</div>"].join("")),tourList:_.template(["<% _.forEach(tours, function(tour) { %>","<% if (tour.spots.length) { %>",'<option value="<%= tour.id %>"><%= tour.id %></option>',"<% } %>","<% }); %>"].join(""))},constructor:function(){return this.$container=i.$el,this.guide=i,this.tour=null,this.$el=t(this.templates.controls({})),this.$el.addClass(i.entityKlass()),_.extend(this,{$bwd:this.$el.find("[data-action*=prev]"),$fwd:this.$el.find("[data-action*=next]"),$first:this.$el.find("[data-action*=first]"),$last:this.$el.find("[data-action*=last]"),$hide:this.$el.find("[data-action*=hide]"),$tour_selector:this.$el.find('[data-action="switchTour"]')}),i.$.on(this.nsEvent("focus"),_.bind(function(){this.$el.on(this.nsEvent("click"),"[data-action]",_.bind(this.proxy,this))},this)).on(this.nsEvent("defocus"),_.bind(function(){this.$el.off(this.nsEvent("click"),"[data-action]")},this)),this},onTourStart:function(t){this.tour=t,this.tour.$.on(this.nsEvent("focus"),_.bind(this.refreshControls,this)),this.tour.$.on(this.nsEvent("add"),_.bind(this.refreshControls,this)),this.refresh()},onTourStop:function(){this.tour.$.off(this.nsEvent("focus")),this.tour=null,this.hide()},show:function(){return this.tour?(this.$el.appendTo(this.$container),this.refreshControls(),void 0):!1},hide:function(){this.$el.detach()},remove:function(){this.$el&&(this.$el.remove(),i.$.off(this.nsEvent("marking.gjs_markers")).off(this.nsEvent("unmarking.gjs_markers")))},attachToMarker:function(t){return t.$el?(this.$container=t.$el,this.$container.addClass("with-controls"),this.show(),void 0):this.hide()},detachFromMarker:function(){this.$container.removeClass("with-controls"),this.$container=t(),this.hide()},refresh:function(){var t=i.tour,s=i.getExtension("tutor"),e=i.getExtension("markers"),n=this.getOptions();e&&e.isEnabled(t)&&n.inMarkers?this.markerMode(e):s&&s.isEnabled(t)&&n.inTutor?this.tutorMode(s):this.classicMode(),this.show()},classicMode:function(){var t=i.getExtension("tutor"),s=i.getExtension("markers");this.$container=i.$el,t&&t.$el.addClass("without-controls").removeClass("with-controls"),s&&i.$.off(this.nsEvent("marking.gjs_markers")).off(this.nsEvent("unmarking.gjs_markers"))},markerMode:function(){var s,e=this;this.$container=t(),i.$.on(this.nsEvent("marking.gjs_markers"),function(t,i){e.attachToMarker(i)}).on(this.nsEvent("unmarking.gjs_markers"),function(t,i){e.detachFromMarker(i)}),i.tour&&i.tour.current&&i.tour.current.marker&&(s=i.tour.current.marker,this.attachToMarker(s),s.place())},tutorMode:function(t){this.$container=t.$el,t.$el.addClass("with-controls")},proxy:function(i){var s,e,n,o=t(i.target).attr("data-action");return o?(o.indexOf(".")>-1?(s=o.split("."),e=s[0],n=s[1],this[e]&&this[e][n]&&this[e][n]()):this[o]&&this[o](),t.consume(i)):t.consume(i)},refreshControls:function(){var t=this.tour,s=this.getOptions(t);this.$bwd.prop("disabled",!t.hasPrev()),this.$fwd.prop("disabled",!t.hasNext()),this.$first.prop("disabled",!t.hasPrev()).toggle(s.withJumps),this.$last.prop("disabled",!t.hasNext()).toggle(s.withJumps),this.$hide.toggle(s.withClose),s.withTourSelector?(this.$tour_selector.html(this.templates.tourList({tours:i.tours})).toggle(i.tours.length>1).find('[value="'+t.id+'"]').prop("selected",!0),1===this.$tour_selector.children().length&&this.$tour_selector.hide()):this.$tour_selector.hide()},switchTour:function(){var t=i.getTour(this.$tour_selector.find(":selected").val());return t&&!t.isActive()?(t.reset(),i.runTour(t)):!1}}),i.addExtension(new s)}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=i,e=function(){return this.constructor()},n=function(){return this.constructor.apply(this,arguments)},o=0,r=_.template(["<div>",'<span class="index"><%= index +1 %></span>',"</div>"].join("")),h=_.template(["<div>",'<span class="index"><%= index +1 %></span>','<div class="text"><%= text %></div>',"</div>"].join("")),a=_.template(["<div>",'<span class="index"><%= index +1 %></span>','<h6 class="caption"><%= caption %></h6>','<div class="text"><%= text %></div>',"</div>"].join("")),u=_.template('<div style="position: relative;"></div>'),l=1,d=2,c=3,p=1,f=2,g=3,$=4,v=5,m=6,b=7,w=8;_.extend(e.prototype,i.Extension,{id:"markers",defaults:{enabled:!0,refreshFrequency:500},constructor:function(){return i.Tour.prototype.addOption("alwaysMark",!0),i.Tour.prototype.getMarkers=function(){return _.pluck(_.filter(this.spots,function(t){return!!t.marker}),"marker")},i.tour&&i.tour.setOption("alwaysMark",!0),i.Spot.prototype.addOption("withMarker",!0),i.$.on("add",_.bind(this.addMarker,this)),this},addMarker:function(t,i,s){var e;return i.isOn("withMarker")?this.isEnabled(i.tour)?(e=new n(i,s||{}),e.canShow()&&e.show(),e):null:null},refresh:function(){i.isShown()&&this.isEnabled()&&i.tour&&this.isEnabled(i.tour)&&(this.onTourStop(i.tour),this.onTourStart(i.tour))},onTourStart:function(i){t(document.body).on(this.nsEvent("click"),".gjs-marker",function(){var i=t(this).data("gjs-marker");return i&&(i.spot.isFocused()||i.spot.tour.focus(i.spot)),!0}),t(window).on(this.nsEvent("resize"),_.throttle(_.bind(this.repositionMarkers,this),this.getOption("refreshFrequency"))),i.isOn("alwaysMark")&&_.invoke(i.getMarkers(),"show")},onTourStop:function(i){t(window).off(this.nsEvent("resize")),t(document.body).off(this.nsEvent("click")),_.invoke(i.getMarkers(),"hide")},repositionMarkers:function(){var t=i.tour;return t?(console.log("[markers] repositioning markers for tour ",t.id),_.invoke(_.where(t.getMarkers(),{placement:c}),"snapToSpot"),!0):!0}}),_.extend(n.prototype,s.Optionable,{defaults:{position:"right",placement:"sibling",withText:!0,width:"auto",smart:!0,mimic:!1,mimicDisplay:!0,margin:15},constructor:function(t,s){return _.extend(this,s,{id:++o,spot:t}),this.setOptions(_.extend({},this.defaults,(s||{}).options,i.getOptions("marker"),t.tour.getOptions("marker"),t.getOptions("marker"))),t.marker=this,this.spot.$.on(this.ns("focus"),_.bind(function(){this.show()},this)).on(this.ns("defocus"),_.bind(function(){this.hide()},this)).on(this.ns("remove"),_.bind(function(){this.remove()},this)),this.build(),i.log("Marker",this.id,"created for spot",""+this.spot),this},ns:function(t){return[t,"gjs_marker",this.id].join(".")},build:function(){var s,e,n,o=i.isOn("RTL"),u=this.spot,x=this.getOptions();if(!u||!u.isVisible())return!1;if(this.$el)return!1;switch(x.placement){case"inline":this.placement=l;break;case"sibling":this.placement=d;break;case"overlay":this.placement=c;break;default:throw'guide-marker.js: bad placement "'+this.getOption("placement")+'"'}if(o){switch(this.getOption("position")){case"topleft":n="topright";break;case"topright":n="topleft";break;case"right":n="left";break;case"bottomright":n="bottomleft";break;case"bottomleft":n="bottomright";break;case"left":n="right";break;default:n=this.getOption("position")}this.setOptions({position:n}),x.position=n}switch(x.position){case"topleft":this.position=o?g:p;break;case"top":this.position=f;break;case"topright":this.position=o?p:g;break;case"right":this.position=o?w:$;break;case"bottomright":this.position=o?b:v;break;case"bottom":this.position=m;break;case"bottomleft":this.position=o?v:b;break;case"left":this.position=o?$:w;break;default:throw'guide-marker.js: bad position "'+x.position+'"'}return this.withText=!!x.withText&&u.hasContent(),this.spot_klasses=["gjs-spot-"+x.placement,"gjs-spot-"+x.position].join(" "),e=_.isFunction(x.template)?x.template:u.hasCaption()?a:u.hasText()?h:r,s=t(e({index:u.index,text:u.getText(),caption:u.getCaption()})),u.setScrollAnchor(s),_.extend(this,{$el:s,$index:s.find(".index"),$caption:s.find(".caption"),$text:s.find(".text")}),s.addClass(["gjs-marker",i.entityKlass(),x.placement+"-marker",x.position].join(" ")).data("gjs-marker",this),this.placement===d&&(this.wrap(),this.rightMargin=parseInt(s.css("margin-right"),10),this.leftMargin=parseInt(s.css("margin-left"),10)),!0},remove:function(){if(!this.spot)throw"marker being removed twice?!";i.log("Marker",this.id,"removed for spot",""+this.spot),this.hide({completely:!0}),this.spot.$.off(this.ns("remove")).off(this.ns("defocus")).off(this.ns("focus")),delete this.spot.marker,this.$el&&(this.$el.remove(),this.$el=this.spot=null)},show:function(){return this.$el||this.build()?this.canShow()?(this.spot.isFocused()&&(i.$.triggerHandler("marking.gjs_markers",[this]),this.$el.addClass("focused"),this.withText&&(this.$index.hide(),this.$text.show(),this.$caption.show(),this.$el.css({width:this.getOption("width")||this.defaults.width})),i.$.triggerHandler("marked.gjs_markers",[this])),this.spot.$el.addClass(this.spot_klasses),this.attach(),this.place(),i.log("Marker",this.id,"highlighted for spot",""+this.spot),void 0):(this.hide({completely:!0}),!1):!1},hide:function(t){t=_.defaults(t||{},{completely:!1}),i.$.triggerHandler("unmarking.gjs_markers",[this]),!this.spot.tour.isOn("alwaysMark")||t.completely?(this.spot.$el.removeClass(this.spot_klasses),this.$el&&this.$el.detach(),this.isWrapped()&&this.unwrap()):this.$el&&(this.$el.removeClass("focused"),this.withText&&(this.$index.show(),this.$text.hide(),this.$caption.hide(),this.$el.css({width:"auto"})),_.defer(_.bind(this.show,this))),i.$.triggerHandler("unmarked.gjs_markers",[this])},canShow:function(){var t=this.spot;return this.$el?t.tour.isActive()&&t.isOn("withMarker")?t.tour.isOn("alwaysMark")||t.isFocused()?t.isVisible()?!0:!1:!1:!1:!1},fitsIn:function(i){var s=this.spot.$el.offset(),e=this.spot.$el.outerWidth(),n=this.$el.outerWidth(),o=this.$el.outerHeight(),r=t(window).width()-20;return _.contains([p,w,b],i)&&0>s.left-n?1:_.contains([g,$,v],i)&&s.left+e+n>r?2:_.contains([p,f,g],i)&&0>s.top-o?3:0},beSmart:function(){var t,i=-1;0!==(t=this.fitsIn(this.position))&&(1===t?i=w:2===t?i=w:3===t&&(i=m))},place:function(){var t=this.spot.$el,i=this.$el;switch(this.placement){case l:this.hvCenter();break;case d:this.$container.is(":visible")||(this.wrap(),this.attach()),this.negateMargins(i,t,this.position,this.leftMargin,this.rightMargin,15),this.hvCenter();break;case c:this.snapToSpot()}},attach:function(){var t;switch(this.placement){case l:this.spot.$el.append(this.$el);break;case d:this.isWrapped()||this.wrap(),t=this.position>=g&&v>=this.position?"append":"prepend",this.$container.append(this.spot.$el),this.$container[t](this.$el);break;case c:i.$el.append(this.$el)}return this},hvCenter:function(){var i,s,e=this.$el,n=0,o=this.spot.$el.offset(),r={w:e.outerWidth(),h:e.outerHeight(),vw:t(window).width()-20,vh:t(window).height()-20};switch(this.position){case f:case m:i="left",s=e.outerWidth()/2,n=-1*s,o.left+r.w>r.vw&&(n=-1*(o.left+r.w-r.vw));break;case $:case w:i="top",s=e.outerHeight()/2,n=-1*s}e.css("margin-"+i,n)},negateMargins:function(){var t,i,s=0,e=this.$el,n=this.spot.$el;switch(this.position){case g:case $:case v:i=parseInt(n.css("margin-right"),10),i>0&&(s=-1*i+this.leftMargin,t="left");break;case p:case w:case b:i=parseInt(n.css("margin-left"),10),i>0&&(s=-1*(i-this.rightMargin),t="right")}return 0!==s&&e.css("margin-"+t,s),s},snapToSpot:function(){if(!this.canShow())return this.hide({completely:!0}),!1;var s,e,n,o=this.$el.offset()||{top:0,left:0},r=this.spot.$el.offset(),h=this.spot.$el.outerWidth(),a=this.spot.$el.outerHeight(),u=this.getOption("margin");switch(this.$el.offset({top:0,left:0}),s=this.$el.outerWidth(),e=this.$el.outerHeight(),this.position){case p:r.top-=e+u;break;case f:r.top-=e+u,r.left+=h/2-s/2;break;case g:r.top-=e+u,r.left+=h-s;break;case $:r.top+=a/2-e/2,r.left+=h+u;break;case v:r.top+=a+u,r.left+=h-s;break;case m:r.top+=a+u,r.left+=h/2-s/2;break;case b:r.top+=a+u;break;case w:r.top+=a/2-e/2,r.left-=s+u}return i.isOn("withAnimations")?(n=this.spot.isOn("autoScroll"),this.spot.setOptions({autoScroll:!1},null,!0),this.$el.offset(o),this.$el.animate({top:r.top,left:r.left},250,_.bind(function(){this.spot.setOptions({autoScroll:n},null,!0)},this)),this.spot.isFocused()&&!this.spot.$el.is(":in_viewport")&&t("html, body").animate({scrollTop:.9*r.top},i.isOn("withAnimations")?250:0)):this.$el.offset(r),r},wrap:function(){var s=this.spot.$el;this.isWrapped()&&this.unwrap(),this.$container=this.isOn("mimic")?t(s[0].outerHTML.replace(/(<\/?)\w+\s/,"$1div ")).html("").attr({id:null,"class":s[0].className.replace(/(gjs(\-?\w+)+)/g,"").trim()}).css({position:"relative"}):t(u({})),this.$container.addClass("gjs-container gjs-container-"+(this.spot.index+1)).css({display:this.isOn("mimicDisplay")?s.css("display"):"inherit"}).insertBefore(s).append(s),i.log("Marker",this.id,"wrapped")},unwrap:function(){this.$container&&(i.log("Marker",this.id,"unwrapping"),this.$el&&this.$el.detach(),this.spot.$el.parent().is(this.$container)&&this.$container.replaceWith(this.spot.$el),this.$container.remove(),this.$container=null)},isWrapped:function(){return!!this.$container},positionToString:function(t){var i;switch(t){case p:i="topleft";break;case f:i="top";break;case g:i="topright";break;case $:i="right";break;case v:i="bottomright";break;case m:i="bottom";break;case b:i="bottomleft";break;case w:i="left"}return i}}),i.addExtension(new e)}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor()},e=_.template(['<div id="gjs_toggler">',"<button></button>","</div>"].join(""));_.extend(s.prototype,i.Extension,{defaults:{enabled:!0,resetOnStart:!0},id:"toggler",constructor:function(){return this.$container=i.$container,this.$el=t(e({})),this.$el.addClass(i.entityKlass()),this.$indicator=this.$el.find("button"),this.$el.on("click",".show",_.bind(this.launchTour,this)),this.$el.on("click",".hide",_.bind(i.hide,i)),i.$.on(this.nsEvent("showing"),_.bind(this.collapse,this)).on(this.nsEvent("hiding"),_.bind(this.expand,this)).on(this.nsEvent("dismiss"),_.bind(this.remove,this)),this
},install:function(){this.isEnabled()&&this.show().expand()},show:function(){return this.$el.appendTo(this.$container),this},hide:function(){return this.$el.detach(),this},remove:function(){this.$el.remove()},collapse:function(){this.$indicator.text("Stop Tour").removeClass("show").addClass("hide"),this.$el.removeClass("collapsed")},expand:function(){this.$indicator.text("Tour").removeClass("hide").addClass("show"),this.$el.addClass("collapsed")},refresh:function(){this.isEnabled()?this.show():this.hide()},launchTour:function(){this.isOn("resetOnStart")&&i.tour&&i.tour.reset(),i.show()}}),i.addExtension(new s)}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor()},e=_.template(['<div id="gjs_tutor">','<div class="tutor-navigation">','<button class="bwd"></button>',"<span></span>",'<button class="fwd"></button>',"</div>",'<div class="tutor-content"></div>',"</div>"].join("")),n=_.template(["<div>","<% if (spot.hasCaption()) { %>",'<h6 class="caption"><%= spot.getCaption() %></h6>',"<% } %>","<div><%= spot.getText() %></div>","</div>"].join(""),null,{variable:"spot"});_.extend(s.prototype,i.Extension,{id:"tutor",defaults:{enabled:!0,spanner:!1},constructor:function(){return this.$container=i.$el,this.$el=t(e({})),this.$el.attr({"class":i.entityKlass()}),_.extend(this,{$content:this.$el.find("> .tutor-content"),$nav:this.$el.find("> .tutor-navigation"),$bwd:this.$el.find(".bwd"),$fwd:this.$el.find(".fwd")}),i.$.on("dismiss",_.bind(this.remove,this)),this},show:function(){return this.$el.appendTo(this.$container),this},hide:function(){return this.$el.detach(),this},remove:function(){this.$el.remove()},refresh:function(){var t=i.tour,s=this.getOptions();this.$el.toggleClass("spanner",s.spanner),t&&t.isActive()&&t.current&&this.focus(null,t.current)},onTourStart:function(t){this.refresh(),t.$.on(this.nsEvent("focus"),_.bind(this.focus,this)),this.$nav.on("click",".bwd",_.bind(t.prev,t)).on("click",".fwd",_.bind(t.next,t)),this.show()},onTourStop:function(t){this.hide(),this.$nav.off("click"),t.$.off(this.nsEvent("focus"))},focus:function(t,i){var s,e=i.tour,o=e.previous&&e.previous.index>e.cursor,r="fast",h="50px";if(i!==this.spot){if(!i)throw"guide.js: no spot?";return this.$content.html(n(i)),s=this.$nav.find("span"),s.stop(!0,!0).animate({"text-indent":(o?"":"-")+h},r,function(){s.html(e.cursor+1),s.css({"text-indent":(o?"-":"")+h},r).animate({"text-indent":0},r)}),this.$bwd.toggleClass("disabled",!e.hasPrev()),this.$fwd.toggleClass("disabled",!e.hasNext()),this.spot=i,!0}}}),i.addExtension(new s)}(_,jQuery,window.guide);