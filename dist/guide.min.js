(function(t){"use strict";var i,s,e,n=["consume","guide"],o=t(window);for(i=0;n.length>i;++i)s=n[i],(void 0!==t[s]||void 0!==t.fn[s])&&console.log("guide.js: existing $."+s+" implementation!");e=function(i){var s=o.scrollTop(),e=s+o.height(),n=t(i).offset().top,r=n+t(i).height();return n>s&&e>r},t.extend(t.expr[":"],{in_viewport:e}),t.consume=function(t){return t?(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.cancelBubble=!0,t.returnValue=!1,!1):!1},t.fn.guide=function(i){var s=window.guide;if(!s)throw"guide.js: bad $.fn.guide call, global guide has not been setup,have you forgotten to initialize guide.js?";return s.addSpot(t(this),i||{}),t(this)}})($),function(_){"use strict";(function(){var t,i,s=["dotAssign","parseOptions"];for(i=0;s.length>i;++i)if(t=s[i],void 0!==_[t])throw"guide.js: existing _."+t+" implementation!"})(),_.dotAssign=function(t,i,s){var e,n,o=(""+t).split("."),r=o.length,h=s||{};if(r>1)for(t=h,n=0;r>n;++n){if(e=o[n],t[e]=t[e]||{},n===r-1){t[e]=i;break}t=t[e]}else h[t]=i;return h};var t=/[:|,]/,i=RegExp(":\\s+","g"),s=function(t){return"false"===t?!1:"true"===t?!0:""+Number(t)===t?Number(t):t};_.parseOptions=function(e,n){var o,r,h,a=(n||{}).separator||t,u=(n||{}).sanitizer||i,d=(n||{}).converter||s,c=(e||"").replace(u,":").split(a),l=c.length,p={};for(o=0;l>o;++o)r=(c[o]||"").trim(),h=(c[++o]||"").trim(),r&&_.dotAssign(r,d(h),p);return p}}(_),function(_,t){"use strict";if(!t)throw Error("guide.js: jQuery is undefined, are you sure it has been loaded yet?");var i,s,e=this,n=function(){return this.constructor.apply(this,arguments),this},o="with-gjs",r="gjs-with-overlay",h="gjs-without-overlay",a="gjs-hiding",u="gjs-entity";_.extend(n.prototype,{id:"guide",defaults:{withOverlay:!1,withAnimations:!0,animeDuration:500},constructor:function(){_.extend(this,{$container:t("body"),$el:t('<div id="gjs" />'),options:_.clone(this.defaults),extensions:[],$:t(this),tours:[],tour:null}),console.log("guide.js: running")},defineTour:function(t,i){var s;return(s=this.getTour(t))||(s=new n.Tour(t),this.tours.push(s)),i&&this.addSpots(i),s},getTour:function(t){return _.isString(t)?_.find(this.tours||[],{id:t}):_.find(this.tours||[],t)},inactiveTours:function(){return _.without(this.tours,this.tour)},runTour:function(t){var i,s=this.tour;if(!(i=this.getTour(t)))throw'guide.js: undefined tour "'+t+'", did you call #defineTour()?';return this.isShown()?s?(this.tour=null,s.$.one("stop",_.bind(this.runTour,this,i.id)),s.stop(),!1):(console.log('guide.js: touring "'+i.id+'"'),this.tour=i,this.tour.start(),!0):(this.$.one("show",_.bind(this.runTour,this,i.id)),this.show({noAutorun:!0}),!1)},addSpot:function(t,i){var s=this.tour,e=i||{},o=e.tour;if(o)if(_.isString(o))s=this.defineTour(o);else{if(!(o instanceof n.Tour))throw Error("guide.js: bad tour object, unrecognized type: "+typeof o);s=o}return s.addSpot(t,e)},addSpots:function(t){if(t instanceof jQuery)return this.fromDOM(t);if(_.isArray(t))return this.fromJSON(t);throw Error("guide.js: bad spots, expected Array or jQuery selector, got: "+typeof t)},fromJSON:function(t){return t=_.isArray(t)?t:[t],_.each(t,function(t){this.addSpot(t.$el,t)},this),this},fromDOM:function(i){var s=this,e=t(i||"body");return e.find("[data-guide]").each(function(){var i=t(this);s.fromNode(i,{text:i.attr("data-guide")})}),e.find("[data-guide-spot]").each(function(){var i=t(this),e=t(i.attr("data-guide-spot")),n=_.parseOptions(i.attr("data-guide-options"));s.fromNode(e,_.extend(n,{text:i.detach().attr("data-guide-spot",null)[0].outerHTML}))}),this},fromNode:function(t,i){var s,e=t,n=_.extend(i||{},_.parseOptions(e.attr("data-guide-options")),{caption:e.attr("data-guide-caption"),tour:e.attr("data-guide-tour")});return n.tour||(s=e.parents("[data-guide-tour]:first"),s.length&&(n.tour=s.attr("data-guide-tour"))),e.attr({"data-guide":null,"data-guide-options":null,"data-guide-caption":null}),this.addSpot(e,n)},show:function(t,i){var s=t||{},e=this,n=this.options.withAnimations?this.options.animeDuration:0;if(this.isShown())return this;if(!this.tours.length)throw"guide.js: can not show with no tours defined!";return this.$.triggerHandler("showing"),this.$container.addClass(o),this.toggleOverlayMode(),this.$el.appendTo(this.$container),this.$el.show(n,function(){e.$.triggerHandler("show"),s.noAutorun||e.runTour(s.tour||e.tour||e.tours[0]),i&&_.isFunction(i)&&i.apply(e,[])}),this},isShown:function(){return this.$container.hasClass(o)&&!this.$container.hasClass(a)},hide:function(){var t=this,i=this.options.withAnimations?this.options.animeDuration:0;return this.isShown()?(this.$container.addClass(a),t.$.triggerHandler("hiding"),t.$el.hide(i,function(){t.tour&&t.tour.stop(),t.$.triggerHandler("hide"),t.$el.detach(),t.$container.removeClass([o,r,a].join(" "))}),this):this},refresh:function(){return _.invoke(this.extensions,"refresh"),this.tour&&this.tour.refresh(),this.toggleOverlayMode(),this},reset:function(){this.isShown()&&this.hide(),this.$.triggerHandler("reset.guide"),this.options=_.clone(this.defaults),_.invoke(this.extensions,"reset",!0),_.invoke(this.tours,"reset",!0),this.tours=[],this.tour=this.defineTour("Default Tour")},toggleOverlayMode:function(t){t&&(this.options.withOverlay=!this.options.withOverlay),this.options.withOverlay?this.$container.addClass(r).removeClass(h):this.$container.removeClass(r).addClass(h)},dismiss:function(){this.$.triggerHandler("dismiss")},focus:function(){return this.tour.focus.apply(this.tour,arguments)},entityKlass:function(){return u},addExtension:function(t){if(!t.id)throw Error("guide.js: bad extension, no #id attribute defined");if(this.extensions.push(t),void 0===t.__initExtension)throw Error("guide.js: bad extension, does not seem to implement the guide.Extension prototype");t.__initExtension(),console.log("guide.js: extension registered: ",t.id)},getExtension:function(t){return _.find(this.extensions,{id:t})}}),n=new n,n.VERSION="1.2.4",s!==void 0?(i!==void 0&&i.exports&&(s=i.exports=n),s.guide=n):e.guide=n}.call(this,_,jQuery),function(_,t,i){"use strict";var s={defaults:{},setOptions:function(t){if(_.isString(t))t=_.parseOptions(t);else if(!_.isObject(t))throw"guide.js: bad options passed to #setOptions; expected an Object or a String, but got: "+typeof t;return this.options=_.extend(this.options||{},t),this.refresh&&this.refresh(),this.$&&this.$.triggerHandler("refresh",[this.options,this]),this},getOptions:function(){return _.extend({},this.options)},addOption:function(t,i){this.defaults[t]=i,this.options&&void 0===this.options[t]&&(this.options[t]=i)}};i.Optionable=s,_.extend(i,s)}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=_.extend({},i.Optionable,{__initExtension:function(){var t=this;if(!this.id)throw"guide.js: bad extension, missing #id";_.defaults(this.defaults,{enabled:!0}),this.options=_.extend({},this.defaults,this.options),i.$.on(this.nsEvent("show"),function(){t.onGuideShow&&t.isEnabled()&&t.onGuideShow()}).on(this.nsEvent("hide"),function(){t.onGuideHide&&t.isEnabled()&&t.onGuideHide()}).on(this.nsEvent("start.tours"),function(i,s){t.onTourStart&&t.isEnabled(s)&&t.onTourStart(s)}).on(this.nsEvent("stop.tours"),function(i,s){t.onTourStop&&t.isEnabled(s)&&t.onTourStop(s)}).on(this.nsEvent("reset.tours"),function(i,s){t.onTourReset&&t.isEnabled(s)&&t.onTourReset(s)})},nsEvent:function(t){return[t,"gjs_extension",this.id].join(".")},getOptions:function(t){var s=this.id;return t=t||i.tour,_.extend({},this.options,i.options[s],t?(t.options||{})[s]:null)},isEnabled:function(t){var i;return t&&(i=t.options[this.id]||{},_.isBoolean(i.enabled))?i.enabled:!!this.getOptions().enabled},refresh:function(){},reset:function(){this.options=_.clone(this.defaults)}});i.Extension=s}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor.apply(this,arguments)};_.extend(s.prototype,i.Optionable,{defaults:{alwaysHighlight:!0},constructor:function(i){return this.$=t(this),_.extend(this,{id:i,options:_.extend({},this.defaults),spots:[],current:null,previous:null,cursor:-1}),this},start:function(){var t=this.options.onStart,s=this.current||this.spots[0];return i.isShown()?(_.each(this.spots,function(t){t.highlight()}),s&&this.focus(s),i.$.triggerHandler("start.tours",[this]),this.$.triggerHandler("start"),t&&_.isFunction(t)&&t.apply(this,[]),this):(i.runTour(this),this)},stop:function(){var t=this.options.onStop;return _.each(this.spots,function(t){t.dehighlight({force:!0})}),i.$.triggerHandler("stop.tours",[this]),this.$.triggerHandler("stop"),t&&_.isFunction(t)&&t.apply(this,[]),this},reset:function(t){return this.current&&(this.current.defocus(),this.current=null),this.previous=null,this.cursor=-1,t&&(i.$.triggerHandler("reset.tours",[this]),_.each(this.spots,function(t){t.remove()}),this.spots=[],this.options=_.clone(this.defaults)),this},isActive:function(){return this===i.tour&&i.isShown()},refresh:function(){return this.isActive()&&this.stop().start(),this},addSpot:function(t,s){var e;if(!(t instanceof jQuery))throw"guide.js: bad Spot target, expected a jQuery object but got "+typeof t;if(t.data("gjs-spot"))throw"guide.js: duplicate spot, see console for more information";return e=new i.Spot(t,this,this.spots.length,s),this.spots.push(e),this.isActive()&&e.highlight(),i.$.triggerHandler("add",[e]),e},addSpots:function(t){if(!_.isArray(t))throw Error("guide.js: bad spots, expected Array, got: "+typeof t);return _.each(t,function(t){this.addSpot(t.$el,t)},this),this},next:function(){return this.hasNext()?this.focus(this.cursor+1):!1},hasNext:function(){var t=this.spots.length;return 1!==t&&t-1>this.cursor},prev:function(){return this.hasPrev()?this.focus(this.cursor-1):!1},hasPrev:function(){var t=this.spots.length;return 1!==t&&this.cursor>0},first:function(){return this.focus(0)},last:function(){return this.focus(this.spots.length-1)},focus:function(t){var s,e=this.getSpot(t);if(!this.isActive())return!1;if(!e)throw"guide.js: bad spot @ "+t+" to focus";if(e.isFocused())return!1;if(!e.isVisible()){for(console.log("guide.js","spot",e.index,"isnt visible, looking for another one"),s=0;this.spots.length>s;++s){if(e=this.spots[s],e.isVisible()){this.cursor=s;break}e=null}if(!e)return console.log("guide.js","no visible spot to focus, aborting"),!1}return this.previous=this.current,this.current=e,this.cursor=e.index,this.previous&&(this.previous.defocus(e),i.$.triggerHandler("defocus",[this.previous,this.current,this])),i.$.triggerHandler("pre-focus",[e,this]),e.focus(this.previous),i.$.triggerHandler("focus",[e,this]),!0},getSpot:function(t){return _.isNumber(t)?this.spots[t]:t?t instanceof i.Spot?_.find(this.spots||[],t):null:null}}),i.Tour=s,i.tour=i.defineTour("Default Tour")}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor.apply(this,arguments)},e="gjs-spot",n="gjs-spot-focused";_.extend(s.prototype,i.Optionable,{defaults:{withMarker:!0,highlight:!0,autoScroll:!0},constructor:function(s,e,n,o){if(o=o||{},!s)throw"guide.js: expected `$el` to be specified for a new Spot, got none";if(!e)throw"guide.js: expected `tour` to be specified for a new Spot, got none";return _.extend(this,{$:t(this),$el:s,tour:e,index:_.isNumber(n)?n:-1,text:o.text,caption:o.caption,$scrollAnchor:s,options:_.extend({},this.defaults,o)}),s.addClass(i.entityKlass()).data("gjs-spot",this),this},isFocused:function(){return this.tour.current===this},getText:function(){return this.text},hasText:function(){return!!(this.getText()||"").length},getCaption:function(){return this.caption},hasCaption:function(){return!!(this.getCaption()||"").length},hasContent:function(){return this.hasText()||this.hasCaption()},isAvailable:function(){return!!this.$el.length},isAttached:function(){return this.isAvailable()&&this.$el.parent().length>0},isVisible:function(){return this.isAttached()&&this.$el.is(":visible")},highlight:function(){var t,i=this.options.highlight&&(this.tour.getOptions().alwaysHighlight||this.isFocused());return this.isAvailable()||this.__refreshTarget(),this.isVisible()||(i=!1),i?(this.options.noPositioningFix||(t=this.$el.css("position"),0>_.indexOf(["fixed","absolute","relative"],t)&&this.$el.addClass("gjs-positioning-fix")),this.$el.toggleClass("no-highlight",!i).toggleClass(e,i),!0):!1},dehighlight:function(t){return(t||{}).force||!this.tour.getOptions().alwaysHighlight?(this.$el.removeClass([e,"gjs-positioning-fix"].join(" ")),!0):!1},focus:function(i){var s=this,e=this.options.onDefocus,o=this.$scrollAnchor;return this.highlight(),this.$el.addClass(n).triggerHandler("focus.gjs",i),e&&_.isFunction(e)&&e.apply(this,arguments),_.defer(function(){s.options.autoScroll&&!o.is(":in_viewport")&&t("html,body").animate({scrollTop:.9*o.offset().top},250)}),this},defocus:function(t){var i=this.options.onDefocus;return this.dehighlight(),this.$el.removeClass(n).triggerHandler("defocus.gjs",t),i&&_.isFunction(i)&&i.apply(this,arguments),this},remove:function(){this.$.triggerHandler("remove"),i.$.triggerHandler("remove.spots",[this]),this.$el.removeData("gjs-spot").removeClass(["no-highlight",e,n].join(" "))},refresh:function(){return this.isFocused()?this.defocus().focus():(this.dehighlight(),this.highlight(),this)},__refreshTarget:function(){this.$el=t(this.$el.selector),this.$scrollAnchor&&this.$scrollAnchor.length||(this.$scrollAnchor=this.$el)},setScrollAnchor:function(t){this.$scrollAnchor=t},toString:function(){return this.tour.id+"#"+this.index}}),i.Spot=s}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor()},e=_.template(['<div id="gjs_controls">','<button data-action="tour.first">First</button>','<button data-action="tour.prev">&lt;</button>','<button data-action="tour.next">&gt;</button>','<button data-action="tour.last">Last</button>','<button data-action="guide.hide">Close</button>','<select name="tour" data-action="switchTour"></select>',"</div>"].join("")),n=_.template(["<% _.forEach(tours, function(tour) { %>",'<option value="<%= tour.id %>"><%= tour.id %></option>',"<% }); %>"].join("")),o=_.template(['<div class="developer-controls">','<button data-action="guide.toggle">Toggle</button>','<button data-action="toggleOverlay">Toggle Overlay</button>',"</div>"].join(""));_.extend(s.prototype,i.Extension,{defaults:{enabled:!0,withDeveloperControls:!1,inMarkers:!1,inTutor:!1},id:"controls",constructor:function(){var s=this;return this.$container=i.$el,this.guide=i,this.tour=i.tour,this.options=this.getOptions(),i.$.on("show",_.bind(this.show,this)).on("hide",_.bind(this.hide,this)).on("dismiss",_.bind(this.remove,this)).on("focus",function(){s.refreshControls()}),this.$el=t(e({})),this.options.withDeveloperControls&&this.$el.append(t(o({}))),this.$el.addClass(i.entityKlass()).on("click","[data-action]",_.bind(this.delegate,this)),_.extend(this,{$bwd:this.$el.find("[data-action*=prev]"),$fwd:this.$el.find("[data-action*=next]"),$first:this.$el.find("[data-action*=first]"),$last:this.$el.find("[data-action*=last]"),$hide:this.$el.find("[data-action*=hide]"),$tour_selector:this.$el.find('[data-action="switchTour"]')}),this},onTourStart:function(t){this.tour=t,this.refresh()},show:function(){return this.$el.appendTo(this.$container),this.refreshControls(),this},hide:function(){return this.$el.detach(),this},remove:function(){this.$el&&(this.$el.remove(),i.$.off("marking.gjs_markers.embedded_controls").off("unmarking.gjs_markers.embedded_controls"))},attachToMarker:function(t){this.$container=t.$el,this.$container.addClass("with-controls"),this.show()},detachFromMarker:function(){this.$container.removeClass("with-controls"),this.$container=t(),this.hide()},refresh:function(){var t=i.getExtension("tutor"),s=i.getExtension("markers"),e=this.getOptions();s&&s.isEnabled()&&e.inMarkers?this.markerMode(s):t&&t.isEnabled()&&e.inTutor?this.tutorMode(t):this.classicMode(),this.show()},classicMode:function(){var t=i.getExtension("tutor"),s=i.getExtension("markers");this.$container=i.$el,t&&t.$el.addClass("without-controls").removeClass("with-controls"),s&&i.$.off("marking.gjs_markers.gjs_controls").off("unmarking.gjs_markers.gjs_controls")},markerMode:function(){var s,e=this;this.$container=t(),i.$.on("marking.gjs_markers.gjs_controls",function(t,i){e.attachToMarker(i)}).on("unmarking.gjs_markers.gjs_controls",function(t,i){e.detachFromMarker(i)}),i.tour&&i.tour.current&&i.tour.current.marker&&(s=i.tour.current.marker,_.defer(function(){s.hide(),e.attachToMarker(s),s.show()}))},tutorMode:function(t){this.$container=t.$el,t.$el.addClass("with-controls")},delegate:function(i){var s,e,n,o=t(i.target).attr("data-action");if(o)return o.indexOf(".")>-1?(s=o.split("."),e=s[0],n=s[1],this[e]&&this[e][n]&&this[e][n]()):this[o]&&this[o](),t.consume(i)},toggleOverlay:function(){i.setOptions({withOverlay:!i.options.withOverlay})},refreshControls:function(){var t=this.tour;this.$bwd.prop("disabled",!t.hasPrev()),this.$fwd.prop("disabled",!t.hasNext()),this.$first.prop("disabled",!t.hasPrev()),this.$last.prop("disabled",!t.hasNext()),this.$hide.toggle(!t.hasNext()),this.$tour_selector.html(n({tours:i.tours})).toggle(i.tours.length>1).find('[value="'+t.id+'"]').prop("selected",!0)},switchTour:function(){var t=i.getTour(this.$tour_selector.find(":selected").val());return t&&!t.isActive()&&(t.reset(),i.runTour(t)),!0}}),i.addExtension(new s)}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor()},e=function(){return this.constructor.apply(this,arguments)},n=_.template(["<div>",'<span class="index"><%= index +1 %></span>',"</div>"].join("")),o=_.template(["<div>",'<span class="index"><%= index +1 %></span>','<div class="text"><%= text %></div>',"</div>"].join("")),r=_.template(["<div>",'<span class="index"><%= index +1 %></span>','<h6 class="caption"><%= caption %></h6>','<div class="text"><%= text %></div>',"</div>"].join("")),h=1,a=2,u=3,d=1,c=2,l=3,p=4,f=5,g=6,v=7,$=8;_.extend(s.prototype,i.Extension,{id:"markers",defaults:{enabled:!0,refreshFrequency:500},constructor:function(){return i.Tour.prototype.addOption("alwaysMark",!0),i.tour&&i.tour.addOption("alwaysMark",!0),i.$.on("add",_.bind(this.addMarker,this)).on("focus",function(t,i){i.marker&&i.marker.highlight()}).on("defocus",function(t,i){i.marker&&i.marker.dehighlight()}),this},addMarker:function(t,s,n){var o;return s.options.withMarker?this.isEnabled(s.tour)?(o=new e(s,n||{}),i.isShown()&&s.tour.isActive()?o.show():o.hide(),o):null:null},refresh:function(){var t=i.tour;i.isShown()&&this.isEnabled()&&_.each(t.spots,function(t){t.marker&&(t.tour.getOptions().alwaysMark?t.marker.show():t.isFocused()||t.marker.hide())})},onGuideShow:function(){t(document.body).on(this.nsEvent("click"),".gjs-marker",function(i){var s=t(this).data("gjs-marker");return s?(s.spot.tour.focus(s.spot),t.consume(i)):!0})},onGuideHide:function(){t(document.body).off(this.nsEvent("click"))},onTourStart:function(t){var i=this;return this.isEnabled(t)?(_.defer(function(){_.each(t.spots,function(t){t.marker&&t.marker.show()})}),t.$.on(this.nsEvent("refresh"),function(){i.refresh()}),void 0):this},onTourStop:function(t){_.each(t.spots,function(t){t.marker&&t.marker.hide()}),t.$.off(this.nsEvent("refresh"))},rebuildMarkers:function(){},repositionMarkers:function(){var t=i.tour;return t?(console.log("[markers] repositioning markers for tour ",t.id),_.each(t.spots,function(t){t.marker&&t.marker.placement===u&&t.marker.place()}),!0):!0}}),_.extend(e.prototype,{defaults:{position:"right",placement:"sibling",withText:!0,width:"auto"},constructor:function(t,s){return _.extend(this,s),this.spot=t,t.marker=this,this.options=_.extend({},this.defaults,(s||{}).options,i.getOptions().marker,t.tour.getOptions().marker,t.getOptions().marker),this.spot.$.on("remove",_.bind(this.remove,this)),this.build()},build:function(){var s,e,m,w=this.spot,b=w.$el;if(!w.isVisible())return this;if(this.$el)return this;switch(this.withText=this.options.withText&&w.hasContent(),this.width=this.options.width||this.defaults.width,this.spot_klasses=["gjs-spot-"+this.options.placement,"gjs-spot-"+this.options.position].join(" "),this.options.placement){case"inline":this.placement=h;break;case"sibling":this.placement=a;break;case"overlay":this.placement=u;break;default:throw'guide-marker.js: bad placement "'+this.options.placement+'"'}switch(this.options.position){case"topleft":this.position=d;break;case"top":this.position=c;break;case"topright":this.position=l;break;case"right":this.position=p;break;case"bottomright":this.position=f;break;case"bottom":this.position=g;break;case"bottomleft":this.position=v;break;case"left":this.position=$;break;default:throw'guide-marker.js: bad position "'+this.options.position+'"'}return m=_.isFunction(this.options.template)?this.options.template:w.hasCaption()?r:w.hasText()?o:n,s=t(m({index:w.index,text:w.getText(),caption:w.getCaption()})),w.setScrollAnchor(s),_.extend(this,{$el:s,$index:s.find(".index"),$caption:s.find(".caption"),$text:s.find(".text")}),s.addClass(["gjs-marker",i.entityKlass(),this.options.placement+"-marker",this.options.position].join(" ")).data("gjs-marker",this),this.placement===a&&(this.isWrapped()?(e=b.parent(),e.append(s)):e=t(b[0].outerHTML.replace(/(<\/?)\w+\s/,"$1div ")).html("").attr({id:null,"class":b[0].className.replace(/(gjs(\-?\w+)+)/g,"").trim()}).css({display:b.css("display"),position:"relative"}).data("gjs-container",!0).insertBefore(b).append(b).append(s),this.$container=e,this.margin_right=parseInt(s.css("margin-right"),10),this.margin_left=parseInt(s.css("margin-left"),10)),this},show:function(){return this.canShow()?(this.spot.$el.addClass(this.spot_klasses),this.place(),void 0):this},hide:function(){this.spot.$el.removeClass(this.spot_klasses),this.$el&&this.$el.detach()},remove:function(){this.hide(),this.$el&&(this.$el.remove(),this.$el=null),this.isWrapped()&&(this.spot.$el.parent().is(this.$container)&&this.$container.replaceWith(this.spot.$el),this.$container.remove(),this.$container=null)},highlight:function(){this.$el||this.build(),i.$.triggerHandler("marking.gjs_markers",[this]),this.$el.addClass("focused"),this.withText&&(this.$index.hide(),this.$text.show(),this.$caption.show(),this.$el.css({width:this.width})),this.show(),i.$.triggerHandler("marked.gjs_markers",[this])},dehighlight:function(){this.$el&&(i.$.triggerHandler("unmarking.gjs_markers",[this]),this.$el.removeClass("focused"),this.withText&&(this.$index.show(),this.$text.hide(),this.$caption.hide(),this.$el.css({width:"auto"})),this.spot.tour.getOptions().alwaysMark?this.show():this.hide(),i.$.triggerHandler("unmarked.gjs_markers",[this]))},canShow:function(){var t=this.spot;return this.$el?t.tour.getOptions().alwaysMark||t.isFocused()?t.isVisible()?!0:!1:!1:!1},place:function(){var t=this.spot.$el,i=this.$el;if(!this.canShow())return this.hide();switch(this.attach(),this.placement){case h:this.hvCenter(i,this.position);break;case a:this.negateMargins(i,t,this.position,this.margin_left,this.margin_right,15),this.hvCenter(i,this.position);break;case u:this.snapTo(i,t,this.position)}},attach:function(){var t;switch(this.placement){case h:this.spot.$el.append(this.$el);break;case a:t=this.position>=l&&f>=this.position?"after":"before",this.spot.$el[t](this.$el);break;case u:i.$el.append(this.$el)}return this},hvCenter:function(t,i){var s,e=0;switch(i){case c:case g:s="left",e=-1*(t.outerWidth()/2);break;case p:case $:s="top",e=-1*(t.outerHeight()/2)}t.css("margin-"+s,e)},negateMargins:function(t,i,s,e,n){var o,r,h=0;switch(s){case l:case p:case f:r=parseInt(i.css("margin-right"),10),r>0&&(h=-1*r+e,o="left");break;case d:case $:case v:r=parseInt(i.css("margin-left"),10),r>0&&(h=-1*(r-n),o="right")}return 0!==h&&t.css("margin-"+o,h),h},snapTo:function(t,i,s,e){var n=i.offset(),o=i.outerWidth(),r=i.outerHeight(),h=t.outerHeight(),a=t.outerWidth(),u=e||0;switch(s){case d:n.top-=h+u;break;case c:n.top-=h+u,n.left+=o/2-a/2;break;case l:n.top-=h+u,n.left+=o-a;break;case p:n.top+=r/2-h/2,n.left+=o+u;break;case f:n.top+=r+u,n.left+=o-a;break;case g:n.top+=r+u,n.left+=o/2-a/2;break;case v:n.top+=r+u;break;case $:n.top+=r/2-h/2,n.left-=a+u}t.offset(n)},isWrapped:function(){var t=this.$container;return t&&t.length&&t.data("gjs-container")?!0:void 0}}),i.addExtension(new s)}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor()},e=_.template(['<div id="gjs_toggler">',"<button></button>","</div>"].join(""));_.extend(s.prototype,i.Extension,{defaults:{enabled:!0},id:"toggler",constructor:function(){return this.options=_.defaults({},this.defaults),this.$container=i.$container,this.$el=t(e({})),this.$el.addClass(i.entityKlass()),this.$indicator=this.$el.find("button"),this.$el.on("click",".show",_.bind(i.show,i)),this.$el.on("click",".hide",_.bind(i.hide,i)),i.$.on(this.nsEvent("showing"),_.bind(this.collapse,this)).on(this.nsEvent("hiding"),_.bind(this.expand,this)).on(this.nsEvent("dismiss"),_.bind(this.remove,this)),this.show().expand(),this},show:function(){return this.$el.appendTo(this.$container),this},hide:function(){return this.$el.detach(),this},remove:function(){this.$el.remove()},collapse:function(){this.$indicator.text("Stop Tour").removeClass("show").addClass("hide"),this.$el.removeClass("collapsed")},expand:function(){this.$indicator.text("Tour").removeClass("hide").addClass("show"),this.$el.addClass("collapsed")},refresh:function(){this.isEnabled()?this.show():this.hide()}}),i.addExtension(new s)}(_,jQuery,window.guide),function(_,t,i){"use strict";var s=function(){return this.constructor()},e=_.template(["<div>",'<div class="tutor-navigation">','<button class="bwd"></button>',"<span></span>",'<button class="fwd"></button>',"</div>",'<div class="tutor-content"></div>',"</div>"].join("")),n=_.template(["<div>","<% if (spot.hasCaption()) { %>",'<h6 class="caption"><%= spot.getCaption() %></h6>',"<% } %>","<div><%= spot.getText() %></div>","</div>"].join(""),null,{variable:"spot"});_.extend(s.prototype,i.Extension,{id:"tutor",defaults:{enabled:!0,spanner:!1},constructor:function(){return this.$container=i.$el,this.$el=t(e({})),this.$el.attr({id:"gjs_tutor","class":i.entityKlass()}),_.extend(this,{$content:this.$el.find("> .tutor-content"),$nav:this.$el.find("> .tutor-navigation"),$bwd:this.$el.find(".bwd"),$fwd:this.$el.find(".fwd")}),i.$.on("show",_.bind(this.show,this)).on("hide",_.bind(this.hide,this)).on("dismiss",_.bind(this.remove,this)).on("focus",_.bind(this.focus,this)),this.$nav.on("click",".bwd",function(){i.tour.prev()}).on("click",".fwd",function(){i.tour.next()}),this},show:function(){return this.isEnabled()?(this.$el.appendTo(this.$container),this):this},hide:function(){return this.$el.detach(),this},remove:function(){this.$el.remove()},refresh:function(){var t=this.getOptions();return this.isEnabled()?(this.$el.parent().length||this.show(),this.$el.toggleClass("spanner",t.spanner),this.focus(null,i.tour.current,i.tour),void 0):this.hide()},onGuideStart:function(){this.show()},onGuideStop:function(){this.hide()},onTourStart:function(){this.refresh()},onTourStop:function(){this.hide()},focus:function(t,i,s){var e,o=s.previous&&s.previous.index>s.cursor,r="fast",h="50px";return i&&i.$el.is(":visible")?(this.show(),i!==this.spot?(this.$content.html(n(i)),e=this.$nav.find("span"),e.stop(!0,!0).animate({"text-indent":(o?"":"-")+h},r,function(){e.html(s.cursor+1),e.css({"text-indent":(o?"-":"")+h},r).animate({"text-indent":0},r)}),this.$bwd.toggleClass("disabled",!s.hasPrev()),this.$fwd.toggleClass("disabled",!s.hasNext()),this.spot=i,!0):void 0):this.hide()}}),i.addExtension(new s)}(_,jQuery,window.guide);